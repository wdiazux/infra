# Ansible Inventory for Infrastructure Management
#
# Copy this file to hosts.yml and customize with your actual values
# cp hosts.yml.example hosts.yml
#
# NOTE: hosts.yml is in .gitignore to prevent committing sensitive info
#
# IMPORTANT: Talos Linux is NOT managed via Ansible.
# Talos uses talosctl API for configuration - see terraform/ for Talos management.
# This inventory is for Proxmox preparation and traditional VMs only.

---
all:
  vars:
    # Global variables
    ansible_python_interpreter: /usr/bin/python3

# Proxmox hosts (for Day 0 preparation)
proxmox:
  hosts:
    pve:
      ansible_host: 192.168.1.10  # Your Proxmox host IP
      ansible_user: root
      ansible_ssh_private_key_file: ~/.ssh/id_rsa

      # Proxmox-specific variables
      proxmox_api_url: "https://192.168.1.10:8006/api2/json"
      proxmox_node_name: "pve"

      # Hardware details
      cpu_vendor: "amd"  # or "intel"
      has_gpu: true
      gpu_pci_id: "01:00"

      # Storage
      zfs_pool: "tank"
      zfs_arc_max_gb: 16

  vars:
    # Proxmox defaults
    ansible_port: 22

# Traditional VMs (if any) - accessed via SSH
traditional_vms:
  children:
    debian_vms:
      hosts:
        # debian-vm:
        #   ansible_host: 192.168.1.110
        #   ansible_user: wdiaz

    ubuntu_vms:
      hosts:
        # ubuntu-vm:
        #   ansible_host: 192.168.1.111
        #   ansible_user: wdiaz

    arch_vms:
      hosts:
        # arch-vm:
        #   ansible_host: 192.168.1.112
        #   ansible_user: wdiaz

  vars:
    ansible_ssh_private_key_file: ~/.ssh/id_rsa

# NAS/Storage hosts
nas:
  hosts:
    nas-server:
      ansible_host: 192.168.1.200  # Your NAS IP
      ansible_user: wdiaz  # Or appropriate user for your NAS

      # NFS configuration
      nfs_exports:
        - path: "/mnt/tank/k8s-storage"
          clients: "192.168.1.0/24"
          options: "rw,sync,no_subtree_check,no_root_squash"

        - path: "/mnt/tank/backups"
          clients: "192.168.1.0/24"
          options: "rw,sync,no_subtree_check"

      # Samba configuration (if applicable)
      smb_shares:
        - name: "k8s-storage"
          path: "/mnt/tank/k8s-storage"
          guest_ok: false

# Control machine (where Ansible runs from)
localhost:
  hosts:
    control:
      ansible_connection: local
      ansible_python_interpreter: /usr/bin/python3

# Group variables by function
day0_hosts:
  children:
    proxmox: {}

# Notes:
# - Talos Linux is managed via Terraform and talosctl, NOT Ansible
# - Proxmox host requires SSH access for Day 0 preparation (IOMMU, etc.)
# - Traditional VMs use standard SSH connection
# - NAS may use SSH or API depending on the system (TrueNAS, Synology, etc.)
# - Update IPs, usernames, and paths to match your infrastructure
# - Use ansible-vault or SOPS for sensitive variables (passwords, tokens)
