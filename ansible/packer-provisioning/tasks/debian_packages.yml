---
# Debian/Ubuntu Package Installation Tasks
# This file is included by install_baseline_packages.yml for Debian-based systems

- name: Update APT cache (Debian/Ubuntu)
  ansible.builtin.apt:
    update_cache: yes
    cache_valid_time: 3600
  tags: [debian, ubuntu]

- name: Upgrade all packages (Debian/Ubuntu)
  ansible.builtin.apt:
    upgrade: dist
    autoremove: yes
    autoclean: yes
  tags: [debian, ubuntu]

- name: Install baseline packages (Debian/Ubuntu)
  ansible.builtin.apt:
    name: "{{ common_packages + ['net-tools', 'dnsutils'] }}"
    state: present
  tags: [debian, ubuntu]

- name: Install security packages (Debian/Ubuntu)
  ansible.builtin.apt:
    name:
      - ufw
      - crowdsec
      - crowdsec-firewall-bouncer-iptables
      - unattended-upgrades
    state: present
  tags: [debian, ubuntu]
