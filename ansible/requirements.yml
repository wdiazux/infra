# Ansible Requirements for Infrastructure Automation
#
# Ansible Version: 13.0.0+ (ansible-core 2.20.0+)
# Install with: ansible-galaxy install -r requirements.yml
#
# Installation:
#   pip install ansible==13.0.0
#   # OR for latest
#   pip install ansible --upgrade

---
# Ansible Collections
collections:
  # SOPS for encrypted secrets
  - name: community.sops
    version: ">=1.0.0,<2.0.0"
    source: https://galaxy.ansible.com

  # General utilities (Linux VMs)
  - name: community.general
    version: ">=7.0.0"
    source: https://galaxy.ansible.com

  # POSIX utilities (mount, sysctl, etc.)
  - name: ansible.posix
    version: ">=1.5.0"
    source: https://galaxy.ansible.com

  # Windows management
  - name: ansible.windows
    version: ">=2.0.0"
    source: https://galaxy.ansible.com

  - name: community.windows
    version: ">=2.0.0"
    source: https://galaxy.ansible.com

  # Kubernetes management (for Talos)
  - name: kubernetes.core
    version: ">=2.4.0"
    source: https://galaxy.ansible.com

# Ansible Roles (optional - reference implementations)
roles:
  # Talos boot/bootstrap role
  # https://galaxy.ansible.com/sergelogvinov/talos-boot
  # - name: sergelogvinov.talos-boot
  #   version: ">=1.0.0"

# Notes:
# - community.sops: Required for decrypting SOPS-encrypted secrets
# - community.general: Essential utilities (timezone, locale, pacman, ufw, etc.)
# - ansible.posix: Mount points, sysctl, other POSIX utilities
# - ansible.windows: Core Windows modules (win_feature, win_service, etc.)
# - community.windows: Additional Windows modules (win_firewall, win_timezone, etc.)
# - kubernetes.core: For kubectl and Helm operations (Talos Kubernetes management)
# - Talos-specific roles are commented out as reference
# - Most Talos operations use talosctl via shell module
# - For comprehensive Talos management, see:
#   * https://github.com/mgrzybek/talos-ansible-playbooks
#   * https://galaxy.ansible.com/sergelogvinov/talos-boot
#
# Installation:
# 1. Install collections: ansible-galaxy collection install -r requirements.yml
# 2. For Windows: Install pywinrm on control node: pip install pywinrm
# 3. For SOPS: Ensure Age is installed and SOPS_AGE_KEY_FILE is set
