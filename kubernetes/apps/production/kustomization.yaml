# Production Applications
#
# Applications deployed to the homelab cluster.
# Uses base definitions, can add patches for production-specific settings.
#
# Note: Namespaces (tools, misc, arr-stack, media, ai, automation, printing) are managed in
# infrastructure/namespaces/ and deployed by FluxCD before apps.
#
# Structure:
#   apps/base/<namespace>/           - Namespace folder
#   apps/base/<namespace>/<service>/ - Service subfolder
#
# To add a new app:
#   1. Create kubernetes/apps/base/<namespace>/<service>/
#   2. Add kustomization.yaml, deployment.yaml, service.yaml
#   3. Create secret.yaml.template, encrypt with SOPS
#   4. Add service to namespace kustomization.yaml
#
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../base/tools/
  - ../base/misc/
  - ../base/arr-stack/
  - ../base/media/
  - ../base/management/
  - ../base/ai/
  - ../base/automation/
  - ../base/printing/
  - ../base/monitoring/
  - ../base/forgejo/  # Runner for Forgejo Actions (namespace managed by Terraform)
  - ../base/backup/   # Velero backup infrastructure (MinIO)
  - ../base/auth/     # SSO with Zitadel
