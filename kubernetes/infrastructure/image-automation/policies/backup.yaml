# Backup Namespace Image Policies
#
# MinIO uses RELEASE.YYYY-MM-DD date-based tags
---
apiVersion: image.toolkit.fluxcd.io/v1
kind: ImageRepository
metadata:
  name: minio
  namespace: flux-system
spec:
  image: minio/minio
  interval: 12h
---
apiVersion: image.toolkit.fluxcd.io/v1
kind: ImagePolicy
metadata:
  name: minio
  namespace: flux-system
spec:
  imageRepositoryRef:
    name: minio
  filterTags:
    pattern: '^RELEASE\.[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}-[0-9]{2}-[0-9]{2}Z$'
  policy:
    alphabetical:
      order: asc
---
apiVersion: image.toolkit.fluxcd.io/v1
kind: ImageRepository
metadata:
  name: minio-mc
  namespace: flux-system
spec:
  image: minio/mc
  interval: 12h
---
apiVersion: image.toolkit.fluxcd.io/v1
kind: ImagePolicy
metadata:
  name: minio-mc
  namespace: flux-system
spec:
  imageRepositoryRef:
    name: minio-mc
  filterTags:
    pattern: '^RELEASE\.[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}-[0-9]{2}-[0-9]{2}Z$'
  policy:
    alphabetical:
      order: asc
