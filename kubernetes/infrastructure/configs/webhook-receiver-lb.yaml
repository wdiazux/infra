# FluxCD Webhook Receiver LoadBalancer Service
#
# Exposes the FluxCD notification-controller webhook receiver
# for external webhook integrations (GitHub, Forgejo, etc.)
#
# IP: 10.10.2.15 (Important services range)
# Port: 80 -> 9292 (webhook-receiver)
#
# Usage:
#   Configure webhooks to POST to http://10.10.2.15/<receiver-name>
#
# Last Updated: 2026-01-14
---
apiVersion: v1
kind: Service
metadata:
  name: webhook-receiver-lb
  namespace: flux-system
  labels:
    app.kubernetes.io/component: notification-controller
    app.kubernetes.io/part-of: flux
spec:
  type: LoadBalancer
  loadBalancerIP: "${IP_WEBHOOK}"
  ports:
    - name: http
      port: 80
      targetPort: 9292
      protocol: TCP
  selector:
    app: notification-controller
