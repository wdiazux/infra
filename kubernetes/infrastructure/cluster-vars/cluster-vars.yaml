# Cluster-wide Variables ConfigMap
#
# Single source of truth for IPs and domains used across all manifests.
# Referenced by FluxCD Kustomizations via postBuild.substituteFrom.
#
# Most services use ClusterIP and are accessed via Gateway API (Cilium).
# Only services requiring direct network access use LoadBalancer IPs.
#
# Usage in manifests:
#   loadBalancerIP: "${IP_INGRESS}"
#   server: "${NAS_IP}"
#   href: "https://grafana.${DOMAIN_PRIMARY}"
#
# Last Updated: 2026-01-25
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: cluster-vars
  namespace: flux-system
data:
  # Infrastructure
  NAS_IP: "10.10.2.5"
  GATEWAY_IP: "10.10.2.1"

  # Domains
  DOMAIN_PRIMARY: "home-infra.net"
  DOMAIN_EXTERNAL: "reynoza.org"

  # LoadBalancer IPs - Only services requiring direct network access
  # All web UIs use ClusterIP and are accessed via Gateway API (IP_INGRESS)
  IP_FORGEJO_SSH: "10.10.2.14"    # Git SSH access
  IP_WEBHOOK: "10.10.2.15"        # FluxCD external webhooks
  IP_INGRESS: "10.10.2.20"        # Cilium Gateway API (HTTPS termination)
  IP_OLLAMA: "10.10.2.50"         # LLM API (external access)
  IP_QBITTORRENT: "10.10.2.41"    # BitTorrent protocol
