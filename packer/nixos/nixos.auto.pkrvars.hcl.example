# NixOS Packer Variables Example
#
# Copy this file to nixos.auto.pkrvars.hcl and fill in your values
# cp nixos.auto.pkrvars.hcl.example nixos.auto.pkrvars.hcl

# Proxmox Connection
proxmox_url      = "https://proxmox.local:8006/api2/json"
proxmox_username = "root@pam"
proxmox_token    = "PVEAPIToken=terraform@pam!terraform-token=xxxxxxxx"
proxmox_node     = "pve"
proxmox_skip_tls_verify = true

# NixOS Version and ISO
nixos_version = "24.05"  # Current stable release
nixos_iso_url = "https://channels.nixos.org/nixos-24.05/latest-nixos-minimal-x86_64-linux.iso"
nixos_iso_checksum = "file:https://channels.nixos.org/nixos-24.05/latest-nixos-minimal-x86_64-linux.iso.sha256"

# Template Configuration
template_name        = "nixos-golden-template"
template_description = "NixOS 24.05 golden image with cloud-init and qemu-guest-agent"
vm_id                = 9004

# VM Hardware
vm_cpu_type = "host"
vm_cores    = 2
vm_memory   = 2048
vm_disk_size    = "20G"
vm_disk_storage = "local-zfs"

# Network
vm_network_bridge = "vmbr0"

# SSH (for Packer provisioning only)
ssh_username = "root"
ssh_password = "nixos"
ssh_timeout  = "20m"

# Notes:
# - Get latest ISO URL from: https://nixos.org/download
# - Checksum is verified from official .sha256 file
# - ssh_username/password are temporary, only used during build
# - Final VMs will use cloud-init for user creation
# - Template will have cloud-init and qemu-guest-agent installed
# - NixOS uses declarative configuration via /etc/nixos/configuration.nix
