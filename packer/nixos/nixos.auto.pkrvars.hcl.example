# NixOS Packer Variables Example
#
# Copy this file to nixos.auto.pkrvars.hcl and fill in your values
# cp nixos.auto.pkrvars.hcl.example nixos.auto.pkrvars.hcl

# Proxmox Connection (can also use environment variables)
# proxmox_url      = "https://proxmox.example.com:8006/api2/json"
# proxmox_username = "packer@pve!packer-token"
# proxmox_token    = "your-token-secret"
proxmox_node            = "pve"
proxmox_skip_tls_verify = true

# Cloud image base VM (created by import-cloud-image.sh)
cloud_image_vm_id = 9200

# NixOS version (for tracking - image comes from Hydra)
nixos_version = "25.11"

# Template Configuration
template_name        = "nixos-cloud-template"
template_version     = "1.0.0"  # Results in: nixos-cloud-template-v1.0.0
template_description = "NixOS 25.11 cloud image with cloud-init"

# VM Configuration
vm_id             = 9202
vm_name           = "nixos-build"
vm_cores          = 2
vm_memory         = 2048
vm_disk_storage   = "tank"
vm_network_bridge = "vmbr0"

# SSH (for Packer provisioning - uses cloud image default)
ssh_password = "nixos"

# Optional: Add SSH public key to template
# ssh_public_key = "ssh-ed25519 AAAA... user@host"

# Notes:
# - Run import-cloud-image.sh on Proxmox host first to create base VM
# - NixOS is declarative - configure via /etc/nixos/configuration.nix
# - No Ansible provisioning needed - NixOS manages its own packages
# - Image source: https://hydra.nixos.org/job/nixos/release-25.11/nixos.proxmoxImage.x86_64-linux
