# SOPS Configuration for Infrastructure Automation Project
# This file defines encryption rules for different file patterns

# IMPORTANT: You must generate an Age key pair before using SOPS
# See secrets/README.md for instructions on generating keys

creation_rules:
  # Encrypt plaintext files in secrets/ directory (before encrypting to .enc.yaml)
  - path_regex: secrets/.*-plaintext\.(yaml|yml)$
    age: >-
      age18g78xp0aexuelev3wrj3uf2jgfnkdn9ajcc0uwq908a6pe3ewfus69mj20

  # Encrypt all .enc.yaml files in the secrets/ directory
  - path_regex: secrets/.*\.enc\.yaml$
    age: >-
      age18g78xp0aexuelev3wrj3uf2jgfnkdn9ajcc0uwq908a6pe3ewfus69mj20

  # Encrypt Kubernetes app secrets (input files)
  - path_regex: kubernetes/apps/.*/secret\.yaml$
    age: >-
      age18g78xp0aexuelev3wrj3uf2jgfnkdn9ajcc0uwq908a6pe3ewfus69mj20

  # Encrypt all files with .enc.yaml extension anywhere in the repo
  - path_regex: .*\.enc\.yaml$
    age: >-
      age18g78xp0aexuelev3wrj3uf2jgfnkdn9ajcc0uwq908a6pe3ewfus69mj20

  # Encrypt Terraform variable files with secrets
  - path_regex: terraform/.*/secrets\.tfvars$
    age: >-
      age18g78xp0aexuelev3wrj3uf2jgfnkdn9ajcc0uwq908a6pe3ewfus69mj20

  # Encrypt Ansible vault files
  - path_regex: ansible/.*/.*vault.*\.yml$
    age: >-
      age18g78xp0aexuelev3wrj3uf2jgfnkdn9ajcc0uwq908a6pe3ewfus69mj20

