# NAS/External Storage Credentials Template
#
# INSTRUCTIONS:
# 1. Copy this file: cp TEMPLATE-nas-creds.yaml nas-creds-plaintext.yaml
# 2. Fill in your actual NAS values in the plaintext copy
# 3. Encrypt with SOPS: sops -e nas-creds-plaintext.yaml > nas-creds.enc.yaml
# 4. Delete the plaintext file: rm nas-creds-plaintext.yaml
# 5. Commit the encrypted file: git add nas-creds.enc.yaml
#
# DO NOT commit this template with real values!

# NAS Network Information
nas_hostname: "nas.local"
nas_ip: "192.168.1.100"

# NFS Configuration
nfs_enabled: true
nfs_server: "nas.local"
nfs_export_path: "/mnt/tank/k8s-storage"
nfs_mount_options: "vers=4,soft,timeo=600,retrans=2,rsize=1048576,wsize=1048576"

# Samba/CIFS Configuration
smb_enabled: true
smb_server: "nas.local"
smb_share: "k8s-storage"
smb_workgroup: "WORKGROUP"
smb_username: "k8s-user"
smb_password: "your-secure-password-here"
smb_domain: ""  # Leave empty if not using domain

# NFS CSI Driver Configuration (for Kubernetes)
nfs_csi:
  server: "192.168.1.100"
  path: "/mnt/tank/k8s-storage"
  storage_class_name: "nfs-external"
  reclaim_policy: "Retain"  # or "Delete"

# Storage Paths
backup_path: "/mnt/tank/backups"
media_path: "/mnt/tank/media"
data_path: "/mnt/tank/data"

# Access Credentials for Management
nas_admin_user: "admin"
nas_admin_password: "your-admin-password-here"
nas_api_key: "your-api-key-if-applicable"  # For TrueNAS, Synology, etc.

# Network Shares for Traditional VMs
vm_shared_folders:
  - name: "vm-data"
    path: "/mnt/tank/vm-shared"
    access: "rw"
  - name: "vm-backups"
    path: "/mnt/tank/vm-backups"
    access: "rw"

# Notes:
# - External NAS provides persistent storage for single-node Talos cluster
# - NFS is used for Kubernetes PersistentVolumes via NFS CSI driver
# - Samba/CIFS is used for traditional Windows/Linux VMs
# - Ensure NAS is reachable from Proxmox network (check with ping/showmount)
# - Configure NFS exports on NAS to allow Proxmox subnet access
# - For NFS CSI driver: https://github.com/kubernetes-csi/csi-driver-nfs
# - Test NFS mount from Proxmox host: mount -t nfs nas.local:/path /mnt/test
